<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ECEN 2440 - Final Project: Photoresistive night light</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ECEN 2440 - Final Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Photoresistive night light </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Our project is a photoresistive light sensor circuit that powers multiple LEDs when in darkness. Two voltages are compared using a TI LM311p differential comparator with one voltage being applied through a voltage divider that inclues a photoresistor and the other directly to the input pin. As light fades, the photoresistor's resistance increases and causes a voltage difference to occur on the comparator's inputs. Once this occurs, an output voltage is input into the TI MSP432 MCU which then turns multiple LEDs on until enough light hits the photoresistor to switch off the comparator's output. This switch off is also read by the MSP432 and the LEDs are turned off.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
How to use the codebase</h1>
<p >The codebase includes a main file which:</p><ul>
<li>initializes the GPIO inputs &amp; outputs</li>
<li>Initializes the timer</li>
<li>Enables timer interrupts and the NVIC</li>
</ul>
<p >Once initialization is complete, an inifite while loop checks for scheduled events.</p>
<p >The code base is written as an interrupt driven event scheduler. Whenever the timer overflows, the interrupt handler will check for a signal on one of the GPIO pins and schedule an event based on whether that signal is low or high:</p><ul>
<li>A low signal will schedule a call to turn off the onboard LEDs and drive an output pins low.</li>
<li>A high signal will schedule a call to turn on the onboard LEDs and drive and drive the output pins high.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Incremental build</h1>
<p >To design our PCB we first built our circuit using a breadboard. We used an oscilloscope to debug our circuit in order to ensure the TI LM311p differential comparator was working as intended. We utilized the MSP432P4111's external header pins to interface with our PCB. We then finalized our design using Altium PCB design software. For the codebase, we repurposed the timer code from our Ultrasonic sensor lab assignment and utilized Code Composer Studio's built-in debugger to ensure the code operated as expected. Once we confirmed the timer and interrupts were working, we decided to make the code a tab more interesting by implementing a crude software delay and XOR'd our external GPIO pins in order to achieve a more interesting "light-show". </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
